(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{lYtU:function(t,e,n){"use strict";n.r(e),n.d(e,"PassportModule",function(){return at});var r=n("M0ag"),i=n("0bRG"),o=n("fXoL"),a=n("Ac7g"),s=n("tyNb");let c=(()=>{class t{constructor(t,e,n){this.socialService=t,this.settingsSrv=e,this.route=n,this.type=""}ngOnInit(){this.type=this.route.snapshot.params.type,this.mockModel()}mockModel(){const t={token:"123456789",name:"cipchk",email:`${this.type}@${this.type}.com`,id:1e4,time:+new Date};this.settingsSrv.setUser(Object.assign(Object.assign({},this.settingsSrv.user),t)),this.socialService.callback(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(i.d),o.Rb(a.m),o.Rb(s.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-callback"]],features:[o.Cb([i.d])],decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();var l=n("3Pt+"),p=n("ZE2D"),b=n("ocnv"),u=n("B+r4"),d=n("C2AL"),m=n("PTRe"),h=n("OzZK"),g=n("RwU8"),f=n("sYmb");let z=(()=>{class t{constructor(t,e,n,r){this.tokenService=e,this.settings=n,this.router=r,this.f=t.group({password:[null,l.v.required]})}get user(){return this.settings.user}submit(){for(const t in this.f.controls)this.f.controls[t].markAsDirty(),this.f.controls[t].updateValueAndValidity();this.f.valid&&(console.log("Valid!"),console.log(this.f.value),this.tokenService.set({token:"123"}),this.router.navigate(["dashboard"]))}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(l.f),o.Rb(i.a),o.Rb(a.m),o.Rb(s.l))},t.\u0275cmp=o.Lb({type:t,selectors:[["passport-lock"]],decls:15,vars:11,consts:[[1,"ant-card","width-lg",2,"margin","0 auto"],[1,"ant-card-body"],[1,"avatar"],["nzIcon","user","nzSize","large",3,"nzSrc"],["nz-form","","role","form",1,"mt-md",3,"formGroup","ngSubmit"],[3,"nzErrorTip"],["nzSuffixIcon","lock"],["type","password","nz-input","","formControlName","password"],["nzType","flex","nzAlign","middle"],[2,"text-align","right",3,"nzOffset","nzSpan"],["nz-button","","nzType","primary",3,"disabled"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"div",1),o.Xb(2,"div",2),o.Sb(3,"nz-avatar",3),o.Wb(),o.Xb(4,"form",4),o.ec("ngSubmit",function(){return e.submit()}),o.Xb(5,"nz-form-item"),o.Xb(6,"nz-form-control",5),o.jc(7,"translate"),o.Xb(8,"nz-input-group",6),o.Sb(9,"input",7),o.Wb(),o.Wb(),o.Wb(),o.Xb(10,"nz-row",8),o.Xb(11,"nz-col",9),o.Xb(12,"button",10),o.Oc(13),o.jc(14,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb()),2&t&&(o.Db(3),o.qc("nzSrc",e.user.avatar),o.Db(1),o.qc("formGroup",e.f),o.Db(2),o.qc("nzErrorTip",o.kc(7,7,"validation.password.required")),o.Db(5),o.qc("nzOffset",12)("nzSpan",12),o.Db(1),o.qc("disabled",!e.f.valid),o.Db(1),o.Pc(o.kc(14,9,"app.lock")))},directives:[p.a,l.w,l.p,b.b,l.i,u.c,b.c,u.a,b.a,d.a,m.c,m.b,l.d,l.o,l.h,h.a,g.a],pipes:[f.c],styles:["[_nghost-%COMP%]     .ant-card-body{position:relative;margin-top:80px}[_nghost-%COMP%]     .avatar{position:absolute;top:-20px;left:50%;margin-left:-20px}"]}),t})();var v=n("wdp9"),w=n("AytR"),k=n("nYR2"),S=n("ey9i"),y=n("oyxB"),D=n("ofXK"),X=n("TaO5"),q=n("nJia"),W=n("FwiY"),P=n("Wfee");function O(t,e){if(1&t&&o.Sb(0,"nz-alert",27),2&t){const t=o.ic();o.qc("nzType","error")("nzMessage",t.error)("nzShowIcon",!0)}}function C(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Qc(" ",o.kc(2,1,"validation.phone-number.required")," "))}function M(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Qc(" ",o.kc(2,1,"validation.phone-number.wrong-format")," "))}function I(t,e){if(1&t&&(o.Mc(0,C,3,3,"ng-container",28),o.Mc(1,M,3,3,"ng-container",28)),2&t){const t=e.$implicit;o.qc("ngIf",t.errors.required),o.Db(1),o.qc("ngIf",t.errors.pattern)}}let T=(()=>{class t{constructor(t,e,n,r,i,o,a,s,c){this.router=e,this.settingsService=n,this.socialService=r,this.reuseTabService=i,this.tokenService=o,this.startupSrv=a,this.http=s,this.cdr=c,this.error="",this.type=0,this.loading=!1,this.count=0,this.form=t.group({userName:[null,[l.v.required,l.v.pattern(/^(admin|user)$/)]],password:[null,[l.v.required,l.v.pattern(/^(ng\-alain\.com)$/)]],mobile:[null,[l.v.required,l.v.pattern(/^1\d{10}$/)]],captcha:[null,[l.v.required]],remember:[!0]})}get userName(){return this.form.controls.userName}get password(){return this.form.controls.password}get mobile(){return this.form.controls.mobile}get captcha(){return this.form.controls.captcha}switch({index:t}){this.type=t}getCaptcha(){if(this.mobile.invalid)return this.mobile.markAsDirty({onlySelf:!0}),void this.mobile.updateValueAndValidity({onlySelf:!0});this.count=59,this.interval$=setInterval(()=>{this.count-=1,this.count<=0&&clearInterval(this.interval$)},1e3)}submit(){if(this.error="",0===this.type){if(this.userName.markAsDirty(),this.userName.updateValueAndValidity(),this.password.markAsDirty(),this.password.updateValueAndValidity(),this.userName.invalid||this.password.invalid)return}else if(this.mobile.markAsDirty(),this.mobile.updateValueAndValidity(),this.captcha.markAsDirty(),this.captcha.updateValueAndValidity(),this.mobile.invalid||this.captcha.invalid)return;this.loading=!0,this.cdr.detectChanges(),this.http.post("/login/account?_allow_anonymous=true",{type:this.type,userName:this.userName.value,password:this.password.value}).pipe(Object(k.a)(()=>{this.loading=!0,this.cdr.detectChanges()})).subscribe(t=>{if("ok"!==t.msg)return this.error=t.msg,void this.cdr.detectChanges();this.reuseTabService.clear(),t.user.expired=+new Date+3e5,this.tokenService.set(t.user),this.startupSrv.load().then(()=>{let t=this.tokenService.referrer.url||"/";t.includes("/passport")&&(t="/"),this.router.navigateByUrl(t)})})}open(t,e="href"){let n="",r="";switch(r=w.a.production?"https://ng-alain.github.io/ng-alain/#/passport/callback/"+t:"http://localhost:4200/#/passport/callback/"+t,t){case"auth0":n=`//cipchk.auth0.com/login?client=8gcNydIDzGBYxzqV0Vm1CX_RXH-wsWo5&redirect_uri=${decodeURIComponent(r)}`;break;case"github":n=`//github.com/login/oauth/authorize?client_id=9d6baae4b04a23fcafa2&response_type=code&redirect_uri=${decodeURIComponent(r)}`;break;case"weibo":n=`https://api.weibo.com/oauth2/authorize?client_id=1239507802&response_type=code&redirect_uri=${decodeURIComponent(r)}`}"window"===e?this.socialService.login(n,"/",{type:"window"}).subscribe(t=>{t&&(this.settingsService.setUser(t),this.router.navigateByUrl("/"))}):this.socialService.login(n,"/",{type:"href"})}ngOnDestroy(){this.interval$&&clearInterval(this.interval$)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(l.f),o.Rb(s.l),o.Rb(a.m),o.Rb(i.d),o.Rb(v.a,8),o.Rb(i.a),o.Rb(S.c),o.Rb(a.q),o.Rb(o.h))},t.\u0275cmp=o.Lb({type:t,selectors:[["passport-login"]],features:[o.Cb([i.d])],decls:54,vars:39,consts:[["nz-form","","role","form",3,"formGroup","ngSubmit"],[1,"tabs",3,"nzAnimated","nzSelectChange"],[3,"nzTitle"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],["nzErrorTip","Please enter mobile number, muse be: admin or user"],["nzSize","large","nzPrefixIcon","user"],["nz-input","","formControlName","userName","placeholder","username: admin or user"],["nzErrorTip","Please enter password, muse be: ng-alain.com"],["nzSize","large","nzPrefixIcon","lock"],["nz-input","","type","password","formControlName","password","placeholder","password: ng-alain.com"],[3,"nzErrorTip"],["nz-input","","formControlName","mobile","placeholder","mobile number"],["mobileErrorTip",""],[3,"nzGutter"],[3,"nzSpan"],["nzSize","large","nzPrefixIcon","mail"],["nz-input","","formControlName","captcha","placeholder","captcha"],["type","button","nz-button","","nzSize","large","nzBlock","",3,"disabled","nzLoading","click"],["nz-checkbox","","formControlName","remember"],[1,"text-right",3,"nzSpan"],["routerLink","/passport/register",1,"forgot"],["nz-button","","type","submit","nzType","primary","nzSize","large","nzBlock","",3,"nzLoading"],[1,"other"],["nz-tooltip","","nzTooltipTitle","in fact Auth0 via window","nz-icon","","nzType","alipay-circle",1,"icon",3,"click"],["nz-tooltip","","nzTooltipTitle","in fact Github via redirect","nz-icon","","nzType","taobao-circle",1,"icon",3,"click"],["nz-icon","","nzType","weibo-circle",1,"icon",3,"click"],["routerLink","/passport/register",1,"register"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"],[4,"ngIf"]],template:function(t,e){if(1&t&&(o.Xb(0,"form",0),o.ec("ngSubmit",function(){return e.submit()}),o.Xb(1,"nz-tabset",1),o.ec("nzSelectChange",function(t){return e.switch(t)}),o.Xb(2,"nz-tab",2),o.jc(3,"translate"),o.Mc(4,O,1,3,"nz-alert",3),o.Xb(5,"nz-form-item"),o.Xb(6,"nz-form-control",4),o.Xb(7,"nz-input-group",5),o.Sb(8,"input",6),o.Wb(),o.Wb(),o.Wb(),o.Xb(9,"nz-form-item"),o.Xb(10,"nz-form-control",7),o.Xb(11,"nz-input-group",8),o.Sb(12,"input",9),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(13,"nz-tab",2),o.jc(14,"translate"),o.Xb(15,"nz-form-item"),o.Xb(16,"nz-form-control",10),o.Xb(17,"nz-input-group",5),o.Sb(18,"input",11),o.Wb(),o.Mc(19,I,2,2,"ng-template",null,12,o.Nc),o.Wb(),o.Wb(),o.Xb(21,"nz-form-item"),o.Xb(22,"nz-form-control",10),o.jc(23,"translate"),o.Xb(24,"nz-row",13),o.Xb(25,"nz-col",14),o.Xb(26,"nz-input-group",15),o.Sb(27,"input",16),o.Wb(),o.Wb(),o.Xb(28,"nz-col",14),o.Xb(29,"button",17),o.ec("click",function(){return e.getCaptcha()}),o.Oc(30),o.jc(31,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(32,"nz-form-item"),o.Xb(33,"nz-col",14),o.Xb(34,"label",18),o.Oc(35),o.jc(36,"translate"),o.Wb(),o.Wb(),o.Xb(37,"nz-col",19),o.Xb(38,"a",20),o.Oc(39),o.jc(40,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Xb(41,"nz-form-item"),o.Xb(42,"button",21),o.Oc(43),o.jc(44,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Xb(45,"div",22),o.Oc(46),o.jc(47,"translate"),o.Xb(48,"i",23),o.ec("click",function(){return e.open("auth0","window")}),o.Wb(),o.Xb(49,"i",24),o.ec("click",function(){return e.open("github")}),o.Wb(),o.Xb(50,"i",25),o.ec("click",function(){return e.open("weibo","window")}),o.Wb(),o.Xb(51,"a",26),o.Oc(52),o.jc(53,"translate"),o.Wb(),o.Wb()),2&t){const t=o.Ac(20);o.qc("formGroup",e.form),o.Db(1),o.qc("nzAnimated",!1),o.Db(1),o.qc("nzTitle",o.kc(3,21,"app.login.tab-login-credentials")),o.Db(2),o.qc("ngIf",e.error),o.Db(9),o.qc("nzTitle",o.kc(14,23,"app.login.tab-login-mobile")),o.Db(3),o.qc("nzErrorTip",t),o.Db(6),o.qc("nzErrorTip",o.kc(23,25,"validation.verification-code.required")),o.Db(2),o.qc("nzGutter",8),o.Db(1),o.qc("nzSpan",16),o.Db(3),o.qc("nzSpan",8),o.Db(1),o.qc("disabled",e.count>=0)("nzLoading",e.loading),o.Db(1),o.Qc(" ",e.count?e.count+"s":o.kc(31,27,"app.register.get-verification-code")," "),o.Db(3),o.qc("nzSpan",12),o.Db(2),o.Pc(o.kc(36,29,"app.login.remember-me")),o.Db(2),o.qc("nzSpan",12),o.Db(2),o.Pc(o.kc(40,31,"app.login.forgot-password")),o.Db(3),o.qc("nzLoading",e.loading),o.Db(1),o.Qc(" ",o.kc(44,33,"app.login.login")," "),o.Db(3),o.Qc(" ",o.kc(47,35,"app.login.sign-in-with")," "),o.Db(6),o.Pc(o.kc(53,37,"app.login.signup"))}},directives:[l.w,l.p,b.b,l.i,y.b,y.a,D.o,u.c,b.c,u.a,b.a,d.a,m.c,m.b,l.d,l.o,l.h,h.a,g.a,X.a,s.n,q.d,W.a,P.a],pipes:[f.c],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     .ant-tabs .ant-tabs-bar{margin-bottom:24px;text-align:center;border-bottom:0}[_nghost-%COMP%]     .ant-tabs-tab{font-size:16px;line-height:24px}[_nghost-%COMP%]     .ant-input-affix-wrapper .ant-input:not(:first-child){padding-left:4px}[_nghost-%COMP%]     .icon{margin-left:16px;color:#0003;font-size:24px;vertical-align:middle;cursor:pointer;transition:color .3s}[_nghost-%COMP%]     .icon:hover{color:#1890ff}[_nghost-%COMP%]     .other{margin-top:24px;line-height:22px;text-align:left}[_nghost-%COMP%]     .other nz-tooltip{vertical-align:middle}[_nghost-%COMP%]     .other .register{float:right}[data-theme=dark]   [_nghost-%COMP%]     .icon{color:#fff3}[data-theme=dark]   [_nghost-%COMP%]     .icon:hover{color:#fff}"],changeDetection:0}),t})();var j=n("/XSn"),x=n("PScX"),A=n("PFPK");function V(t,e){if(1&t&&(o.Xb(0,"div",4),o.Oc(1),o.jc(2,"translate"),o.Wb()),2&t){const t=o.ic();o.Db(1),o.Qc(" ",o.lc(2,1,"app.register-result.msg",t.params)," ")}}let N=(()=>{class t{constructor(t,e){this.msg=e,this.params={email:""},this.email="",this.params.email=this.email=t.snapshot.queryParams.email||"ng-alain@example.com"}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(s.a),o.Rb(x.e))},t.\u0275cmp=o.Lb({type:t,selectors:[["passport-register-result"]],decls:10,vars:11,consts:[["type","success",3,"title","description"],["title",""],["nz-button","","nzSize","large",3,"nzType","click"],["routerLink","/","nz-button","","nzSize","large"],[1,"title",2,"font-size","20px"]],template:function(t,e){if(1&t&&(o.Xb(0,"result",0),o.jc(1,"translate"),o.Mc(2,V,3,4,"ng-template",null,1,o.Nc),o.Xb(4,"button",2),o.ec("click",function(){return e.msg.success("email")}),o.Oc(5),o.jc(6,"translate"),o.Wb(),o.Xb(7,"button",3),o.Oc(8),o.jc(9,"translate"),o.Wb(),o.Wb()),2&t){const t=o.Ac(3);o.rc("description",o.kc(1,5,"app.register-result.activation-email")),o.qc("title",t),o.Db(4),o.qc("nzType","primary"),o.Db(1),o.Qc(" ",o.kc(6,7,"app.register-result.view-mailbox")," "),o.Db(3),o.Qc(" ",o.kc(9,9,"app.register-result.back-home")," ")}},directives:[A.a,h.a,g.a,d.a,s.m],pipes:[f.c],encapsulation:2}),t})();var R=n("+oEP"),_=n("W9fG"),L=n("zAKX");function E(t,e){if(1&t&&o.Sb(0,"nz-alert",23),2&t){const t=o.ic();o.qc("nzType","error")("nzMessage",t.error)("nzShowIcon",!0)}}function $(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.email.required")))}function U(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.email.wrong-format")))}function B(t,e){if(1&t&&(o.Mc(0,$,3,3,"ng-container",24),o.Mc(1,U,3,3,"ng-container",24)),2&t){const t=e.$implicit;o.qc("ngIf",null==t.errors?null:t.errors.required),o.Db(1),o.qc("ngIf",null==t.errors?null:t.errors.email)}}function G(t,e){1&t&&(o.Xb(0,"div",32),o.Oc(1),o.jc(2,"translate"),o.Wb()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.password.strength.strong")))}function Q(t,e){1&t&&(o.Xb(0,"div",33),o.Oc(1),o.jc(2,"translate"),o.Wb()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.password.strength.medium")))}function Y(t,e){1&t&&(o.Xb(0,"div",34),o.Oc(1),o.jc(2,"translate"),o.Wb()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.password.strength.short")))}function K(t,e){if(1&t&&(o.Xb(0,"div",25),o.Vb(1,26),o.Mc(2,G,3,3,"div",27),o.Mc(3,Q,3,3,"div",28),o.Mc(4,Y,3,3,"div",29),o.Ub(),o.Xb(5,"div"),o.Sb(6,"nz-progress",30),o.Wb(),o.Xb(7,"p",31),o.Oc(8),o.jc(9,"translate"),o.Wb(),o.Wb()),2&t){const t=o.ic();o.Db(1),o.qc("ngSwitch",t.status),o.Db(1),o.qc("ngSwitchCase","ok"),o.Db(1),o.qc("ngSwitchCase","pass"),o.Db(2),o.Gb("progress-",t.status,""),o.Db(1),o.qc("nzPercent",t.progress)("nzStatus",t.passwordProgressMap[t.status])("nzStrokeWidth",6)("nzShowInfo",!1),o.Db(2),o.Pc(o.kc(9,11,"validation.password.strength.msg"))}}function J(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.confirm-password.required")))}function F(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.password.twice")))}function Z(t,e){if(1&t&&(o.Mc(0,J,3,3,"ng-container",24),o.Mc(1,F,3,3,"ng-container",24)),2&t){const t=e.$implicit;o.qc("ngIf",null==t.errors?null:t.errors.required),o.Db(1),o.qc("ngIf",null==t.errors?null:t.errors.equar)}}function H(t,e){1&t&&(o.Xb(0,"nz-select",35),o.Sb(1,"nz-option",36),o.Sb(2,"nz-option",36),o.Wb()),2&t&&(o.Db(1),o.qc("nzLabel","+86")("nzValue","+86"),o.Db(1),o.qc("nzLabel","+87")("nzValue","+87"))}function tt(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.phone-number.required")))}function et(t,e){1&t&&(o.Vb(0),o.Oc(1),o.jc(2,"translate"),o.Ub()),2&t&&(o.Db(1),o.Pc(o.kc(2,1,"validation.phone-number.wrong-format")))}function nt(t,e){if(1&t&&(o.Mc(0,tt,3,3,"ng-container",24),o.Mc(1,et,3,3,"ng-container",24)),2&t){const t=e.$implicit;o.qc("ngIf",null==t.errors?null:t.errors.required),o.Db(1),o.qc("ngIf",null==t.errors?null:t.errors.pattern)}}const rt=function(){return{"width.px":240}},it=[{path:"passport",component:j.a,children:[{path:"login",component:T,data:{title:"\u767b\u5f55",titleI18n:"app.login.login"}},{path:"register",component:(()=>{class t{constructor(e,n,r,i){this.router=n,this.http=r,this.cdr=i,this.error="",this.type=0,this.loading=!1,this.visible=!1,this.status="pool",this.progress=0,this.passwordProgressMap={ok:"success",pass:"normal",pool:"exception"},this.count=0,this.form=e.group({mail:[null,[l.v.required,l.v.email]],password:[null,[l.v.required,l.v.minLength(6),t.checkPassword.bind(this)]],confirm:[null,[l.v.required,l.v.minLength(6),t.passwordEquar]],mobilePrefix:["+86"],mobile:[null,[l.v.required,l.v.pattern(/^1\d{10}$/)]],captcha:[null,[l.v.required]]})}get mail(){return this.form.controls.mail}get password(){return this.form.controls.password}get confirm(){return this.form.controls.confirm}get mobile(){return this.form.controls.mobile}get captcha(){return this.form.controls.captcha}static checkPassword(t){if(!t)return null;const e=this;e.visible=!!t.value,e.status=t.value&&t.value.length>9?"ok":t.value&&t.value.length>5?"pass":"pool",e.visible&&(e.progress=10*t.value.length>100?100:10*t.value.length)}static passwordEquar(t){return t&&t.parent&&t.value!==t.parent.get("password").value?{equar:!0}:null}getCaptcha(){if(this.mobile.invalid)return this.mobile.markAsDirty({onlySelf:!0}),void this.mobile.updateValueAndValidity({onlySelf:!0});this.count=59,this.cdr.detectChanges(),this.interval$=setInterval(()=>{this.count-=1,this.cdr.detectChanges(),this.count<=0&&clearInterval(this.interval$)},1e3)}submit(){if(this.error="",Object.keys(this.form.controls).forEach(t=>{this.form.controls[t].markAsDirty(),this.form.controls[t].updateValueAndValidity()}),this.form.invalid)return;const t=this.form.value;this.loading=!0,this.cdr.detectChanges(),this.http.post("/register?_allow_anonymous=true",t).pipe(Object(k.a)(()=>{this.loading=!1,this.cdr.detectChanges()})).subscribe(()=>{this.router.navigate(["passport","register-result"],{queryParams:{email:t.mail}})})}ngOnDestroy(){this.interval$&&clearInterval(this.interval$)}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(l.f),o.Rb(s.l),o.Rb(a.q),o.Rb(o.h))},t.\u0275cmp=o.Lb({type:t,selectors:[["passport-register"]],decls:50,vars:34,consts:[["nz-form","","role","form",3,"formGroup","ngSubmit"],["class","mb-lg",3,"nzType","nzMessage","nzShowIcon",4,"ngIf"],[3,"nzErrorTip"],["nzSize","large","nzAddonBeforeIcon","user"],["nz-input","","formControlName","mail","placeholder","Email"],["mailErrorTip",""],["nzSize","large","nzAddonBeforeIcon","lock","nz-popover","","nzPopoverPlacement","right","nzPopoverTrigger","focus","nzPopoverOverlayClassName","register-password-cdk",3,"nzPopoverVisible","nzPopoverOverlayStyle","nzPopoverContent","nzPopoverVisibleChange"],["nz-input","","type","password","formControlName","password","placeholder","Password"],["pwdCdkTpl",""],["nzSize","large","nzAddonBeforeIcon","lock"],["nz-input","","type","password","formControlName","confirm","placeholder","Confirm Password"],["confirmErrorTip",""],["nzSize","large",3,"nzAddOnBefore"],["addOnBeforeTemplate",""],["formControlName","mobile","nz-input","","placeholder","Phone number"],["mobileErrorTip",""],[3,"nzGutter"],[3,"nzSpan"],["nzSize","large","nzAddonBeforeIcon","mail"],["nz-input","","formControlName","captcha","placeholder","Captcha"],["type","button","nz-button","","nzSize","large","nzBlock","",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary","nzSize","large","type","submit",1,"submit",3,"nzLoading"],["routerLink","/passport/login",1,"login"],[1,"mb-lg",3,"nzType","nzMessage","nzShowIcon"],[4,"ngIf"],[2,"padding","4px 0"],[3,"ngSwitch"],["class","success",4,"ngSwitchCase"],["class","warning",4,"ngSwitchCase"],["class","error",4,"ngSwitchDefault"],[3,"nzPercent","nzStatus","nzStrokeWidth","nzShowInfo"],[1,"mt-sm"],[1,"success"],[1,"warning"],[1,"error"],["formControlName","mobilePrefix",2,"width","100px"],[3,"nzLabel","nzValue"]],template:function(t,e){if(1&t&&(o.Xb(0,"h3"),o.Oc(1),o.jc(2,"translate"),o.Wb(),o.Xb(3,"form",0),o.ec("ngSubmit",function(){return e.submit()}),o.Mc(4,E,1,3,"nz-alert",1),o.Xb(5,"nz-form-item"),o.Xb(6,"nz-form-control",2),o.Xb(7,"nz-input-group",3),o.Sb(8,"input",4),o.Wb(),o.Mc(9,B,2,2,"ng-template",null,5,o.Nc),o.Wb(),o.Wb(),o.Xb(11,"nz-form-item"),o.Xb(12,"nz-form-control",2),o.jc(13,"translate"),o.Xb(14,"nz-input-group",6),o.ec("nzPopoverVisibleChange",function(t){return e.visible=t}),o.Sb(15,"input",7),o.Wb(),o.Mc(16,K,10,13,"ng-template",null,8,o.Nc),o.Wb(),o.Wb(),o.Xb(18,"nz-form-item"),o.Xb(19,"nz-form-control",2),o.Xb(20,"nz-input-group",9),o.Sb(21,"input",10),o.Wb(),o.Mc(22,Z,2,2,"ng-template",null,11,o.Nc),o.Wb(),o.Wb(),o.Xb(24,"nz-form-item"),o.Xb(25,"nz-form-control",2),o.Xb(26,"nz-input-group",12),o.Mc(27,H,3,4,"ng-template",null,13,o.Nc),o.Sb(29,"input",14),o.Wb(),o.Mc(30,nt,2,2,"ng-template",null,15,o.Nc),o.Wb(),o.Wb(),o.Xb(32,"nz-form-item"),o.Xb(33,"nz-form-control",2),o.jc(34,"translate"),o.Xb(35,"nz-row",16),o.Xb(36,"nz-col",17),o.Xb(37,"nz-input-group",18),o.Sb(38,"input",19),o.Wb(),o.Wb(),o.Xb(39,"nz-col",17),o.Xb(40,"button",20),o.ec("click",function(){return e.getCaptcha()}),o.Oc(41),o.jc(42,"translate"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(43,"nz-form-item"),o.Xb(44,"button",21),o.Oc(45),o.jc(46,"translate"),o.Wb(),o.Xb(47,"a",22),o.Oc(48),o.jc(49,"translate"),o.Wb(),o.Wb(),o.Wb()),2&t){const t=o.Ac(10),n=o.Ac(17),r=o.Ac(23),i=o.Ac(28),a=o.Ac(31);o.Db(1),o.Pc(o.kc(2,21,"app.register.register")),o.Db(2),o.qc("formGroup",e.form),o.Db(1),o.qc("ngIf",e.error),o.Db(2),o.qc("nzErrorTip",t),o.Db(6),o.qc("nzErrorTip",o.kc(13,23,"validation.password.required")),o.Db(2),o.qc("nzPopoverVisible",e.visible)("nzPopoverOverlayStyle",o.tc(33,rt))("nzPopoverContent",n),o.Db(5),o.qc("nzErrorTip",r),o.Db(6),o.qc("nzErrorTip",a),o.Db(1),o.qc("nzAddOnBefore",i),o.Db(7),o.qc("nzErrorTip",o.kc(34,25,"validation.verification-code.required")),o.Db(2),o.qc("nzGutter",8),o.Db(1),o.qc("nzSpan",16),o.Db(3),o.qc("nzSpan",8),o.Db(1),o.qc("disabled",e.count>0)("nzLoading",e.loading),o.Db(1),o.Qc(" ",e.count?e.count+"s":o.kc(42,27,"app.register.get-verification-code")," "),o.Db(3),o.qc("nzLoading",e.loading),o.Db(1),o.Qc(" ",o.kc(46,29,"app.register.register")," "),o.Db(3),o.Pc(o.kc(49,31,"app.register.sign-in"))}},directives:[l.w,l.p,b.b,l.i,D.o,u.c,b.c,u.a,b.a,d.a,m.c,m.b,l.d,l.o,l.h,R.a,h.a,g.a,s.n,P.a,D.q,D.r,D.s,_.a,L.e,L.a],pipes:[f.c],styles:["[_nghost-%COMP%]{display:block;width:368px;margin:0 auto}[_nghost-%COMP%]     h3{margin-bottom:20px;font-size:16px}[_nghost-%COMP%]     .submit{width:50%}[_nghost-%COMP%]     .login{float:right;line-height:40px}  .register-password-cdk .error,   .register-password-cdk .success,   .register-password-cdk .warning{transition:color .3s}  .register-password-cdk .success{color:#52c41a}  .register-password-cdk .warning{color:#faad14}  .register-password-cdk .error{color:#ff4d4f}  .register-password-cdk .progress-pass>.progress .ant-progress-bg{background-color:#faad14}"],changeDetection:0}),t})(),data:{title:"\u6ce8\u518c",titleI18n:"app.register.register"}},{path:"register-result",component:N,data:{title:"\u6ce8\u518c\u7ed3\u679c",titleI18n:"app.register.register"}},{path:"lock",component:z,data:{title:"\u9501\u5c4f",titleI18n:"app.lock"}}]},{path:"passport/callback/:type",component:c}];let ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({imports:[[s.o.forChild(it)],s.o]}),t})(),at=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Pb({type:t}),t.\u0275inj=o.Ob({imports:[[r.b,ot]]}),t})()}}]);